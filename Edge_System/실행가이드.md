# Edge System 실행 가이드

## 설치 완료 ✅

필요한 모든 패키지가 설치되었습니다:
- ✅ torch (PyTorch)
- ✅ opencv-python (OpenCV)
- ✅ ultralytics (YOLOv5)
- ✅ requests, Pillow, numpy

## 실행 방법

### 1. 가상환경 활성화 및 실행

```bash
cd "/Users/choikjun/5-2/모웹프/학기말 프로젝트/Edge_System"
source venv/bin/activate
python detect.py
```

### 2. 실행 전 확인사항

1. **Django 서버가 실행 중이어야 합니다**
   ```bash
   # 다른 터미널에서
   cd Service_System
   source venv/bin/activate
   python manage.py runserver
   ```

2. **웹캠이 연결되어 있어야 합니다**
   - USB 웹캠을 컴퓨터에 연결
   - 다른 프로그램에서 웹캠을 사용 중이 아닌지 확인

3. **Token이 설정되어 있는지 확인**
   - `detect.py` 파일의 `TOKEN` 변수 확인
   - 현재 Token: `3aaa6f4666681d72f9aeb065a6074b9c3c1613e1`

### 3. 실행 중 동작

- 웹캠 영상이 화면에 표시됩니다
- YOLOv5가 객체를 감지하면 박스로 표시됩니다
- 새로운 객체가 감지되면:
  - 이미지가 `captured_images/` 폴더에 저장됩니다
  - Django 서버로 전송됩니다
  - 콘솔에 "✅ [전송 성공]" 메시지가 표시됩니다

### 4. 종료 방법

- `q` 키를 누르거나
- `Ctrl + C`를 누르면 종료됩니다

## 문제 해결

### 웹캠을 찾을 수 없는 경우
```python
# detect.py 파일에서
cap = cv2.VideoCapture(0)  # 0 대신 1, 2 등을 시도
```

### 서버 연결 오류
- Django 서버가 실행 중인지 확인
- `DJANGO_SERVER_URL`이 올바른지 확인
- Token이 올바른지 확인

### YOLOv5 모델 로드 오류
- 인터넷 연결 확인 (첫 실행 시 모델 다운로드)
- `ultralytics` 패키지 재설치:
  ```bash
  pip install --upgrade ultralytics
  ```

## 테스트 (웹캠 없이)

웹캠이 없어도 코드가 정상인지 확인하려면:

```bash
python -c "from changedetection import ChangeDetector; print('✅ 모듈 정상')"
```

